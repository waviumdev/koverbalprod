<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />

  <title>Shop — Koverbalprod</title>
  <meta name="description" content="Merch officiel Koverbalprod. Shop intégré via Spreadshop." />
  <link rel="canonical" href="https://koverbalprod.com/shop/" />
  <link rel="icon" href="/favicon.ico" type="image/x-icon" />
  <link rel="stylesheet" href="/style.css" />
</head>

<body class="preload">
  <a class="skip" href="#main">Aller au contenu</a>
  <div data-nav></div>

  <header class="wrap" style="padding-top: 18px;">
    <p class="eyebrow">MERCH</p>
    <h1 class="page-title">Shop</h1>
    <p class="page-lead">Merch officiel Koverbalprod.</p>
  </header>

  <main id="main" class="wrap">
    <section class="card">
      <div class="card-head">
        <h2>Shop</h2>
        <span class="card-kicker">Intégré</span>
      </div>

      <div class="hero-cta" style="padding:0; margin-bottom: 14px;">
        <a class="btn primary" target="_blank" rel="noopener noreferrer" href="https://koverbalprod.myspreadshop.fr">Ouvrir le shop</a>
        <a class="btn ghost" href="/contact/">Contact</a>
      </div>

      <div class="shop-shell">
        <div id="myShop">
          <a href="https://koverbalprod.myspreadshop.fr">koverbalprod</a>
        </div>
      </div>

      <script>
        var spread_shop_config = {
          shopName: 'koverbalprod',
          locale: 'fr_FR',
          prefix: 'https://koverbalprod.myspreadshop.fr',
          baseId: 'myShop'
        };
      </script>

      <script
        type="text/javascript"
        src="https://koverbalprod.myspreadshop.fr/shopfiles/shopclient/shopclient.nocache.js">
      </script>

    </section>

    <footer class="footer">
      <div class="footer-inner">
        <div class="footer-left">
          <img class="footer-logo" src="/koverbalprod-logo.jpg" alt="Koverbalprod" />
          <div>
            <p class="footer-title">Koverbalprod</p>
            <p class="footer-sub">Label / Production / Rap — « Le crew qui percute le crom »</p>
          </div>
        </div>
        <div class="footer-links">
          <a href="/ecouter/">Écouter</a>
          <a href="/playlists/">Playlists</a>
          <a href="/artistes/">Artistes</a>
          <a href="/contact/">Contact</a>
        </div>
      </div>
    </footer>
  </main>

  <script src="/nav.js" defer></script>
  <script>
    window.addEventListener('load', () => document.body.classList.remove('preload'));
  </script>

  <script type="text/javascript"
  src="https://koverbalprod.myspreadshop.fr/shopfiles/shopclient/shopclient.nocache.js">
</script>
<script>
(() => {
  const root = document.getElementById("myShop");
  if (!root) return;

  const HOME_HASHES = new Set(["", "#!/", "#/", "#!/shop", "#/shop"]);
  const needles = [
    "La confiance n’est pas une chimère",
    "Des produits hors du commun",
    "Un partenaire expérimenté",
    "Votre satisfaction, notre priorité",
    "Nos produits",
    "Créez quelque chose d’aussi unique que vous",
    "Lancez-vous"
  ];

  const norm = (s) => (s || "")
    .replace(/\u00A0/g, " ")
    .replace(/[’']/g, "'")
    .replace(/\s+/g, " ")
    .trim()
    .toLowerCase();

  const needlesN = needles.map(norm);

  function isHome() {
    // Spreadshop embed utilise souvent /shop/#!/ ...
    const h = (location.hash || "").trim();
    return HOME_HASHES.has(h) || h.startsWith("#!/");
  }

  function hideMarketing() {
    if (!isHome()) return;

    // 1) cacher les blocs qui contiennent ces textes
    const candidates = root.querySelectorAll("section, div, main, article");
    candidates.forEach(el => {
      const t = norm(el.innerText);
      if (!t) return;
      if (needlesN.some(n => t.includes(n))) {
        // on remonte jusqu'à un bloc "raisonnable" (pas tout #myShop)
        let target = el;
        for (let i = 0; i < 4 && target.parentElement && target.parentElement !== root; i++) {
          target = target.parentElement;
        }
        target.style.display = "none";
      }
    });

    // 2) cacher les tuiles catégories qui ont "Tous les produits"
    root.querySelectorAll("a").forEach(a => {
      if (norm(a.textContent) === norm("Tous les produits")) {
        let tile = a;
        for (let i = 0; i < 6 && tile.parentElement && tile.parentElement !== root; i++) {
          tile = tile.parentElement;
        }
        tile.style.display = "none";
      }
    });
  }

  // Run + keep running when Spreadshop injecte du contenu
  hideMarketing();
  const obs = new MutationObserver(hideMarketing);
  obs.observe(root, { childList: true, subtree: true });

  // Et quand la SPA change de hash
  window.addEventListener("hashchange", () => setTimeout(hideMarketing, 50));
})();
</script>
</body>
</html>

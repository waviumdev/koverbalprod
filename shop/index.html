<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />

  <title>Shop — Koverbalprod</title>
  <meta name="description" content="Merch officiel Koverbalprod. Shop intégré via Spreadshop." />
  <link rel="canonical" href="https://koverbalprod.com/shop/" />
  <link rel="icon" href="/favicon.ico" type="image/x-icon" />
  <link rel="stylesheet" href="/style.css" />

  <!-- ✅ CSS LOCAL / SCOPÉ AU SHOP (ne touche pas le CSS global) -->
  <style>
    /* Cache le lien fallback */
    .shop-shell #myShop > a { display: none !important; }

    /*
      Objectif : rendre la “home marketing” beaucoup moins haute
      sans casser le panier / checkout / pages produit.
      On scrolle ensuite automatiquement vers les produits.
    */

    /* 1) Raccourcir UNIQUEMENT le haut du shop (le “marketing” est souvent dans les premiers blocs) */
    .shop-shell #myShop > :first-child,
    .shop-shell #myShop > :first-child > :first-child {
      max-height: 700px;
      overflow: hidden;
    }

    /* 2) Ne JAMAIS limiter les vues importantes */
    .shop-shell #myShop .sprd-productDetail,
    .shop-shell #myShop .sprd-basket,
    .shop-shell #myShop .sprd-checkout,
    .shop-shell #myShop [class*="Basket"],
    .shop-shell #myShop [class*="Checkout"],
    .shop-shell #myShop [class*="ProductDetail"],
    .shop-shell #myShop [class*="productDetail"] {
      max-height: none !important;
      overflow: visible !important;
    }

    /* 3) Footer Spreadshop dark + clean (scopé) */
    .shop-shell #myShop .sprd-footer {
      background: #0b0b0b !important;
      color: rgba(255,255,255,.65) !important;
      border-top: 1px solid rgba(255,255,255,.08) !important;
      padding: 16px 12px !important;
      font-size: 0.9rem !important;
      opacity: 0.9;
    }
    .shop-shell #myShop .sprd-footer a {
      color: rgba(255,255,255,.75) !important;
      text-decoration: none !important;
    }
    .shop-shell #myShop .sprd-footer a:hover {
      color: rgba(255,255,255,.95) !important;
      text-decoration: underline !important;
    }
    /* Supprimer la promo “Ouvre ta boutique…” */
    .shop-shell #myShop .sprd-footer__open-shop,
    .shop-shell #myShop .sprd-footer__promotion,
    .shop-shell #myShop .sprd-footer a[href*="spreadshop"],
    .shop-shell #myShop .sprd-footer a[href*="spreadshirt"] {
      display: none !important;
    }
    /* Logos discrets */
    .shop-shell #myShop .sprd-footer img,
    .shop-shell #myShop .sprd-footer svg {
      opacity: .55 !important;
      filter: grayscale(1) !important;
    }
  </style>
</head>

<body class="preload">
  <a class="skip" href="#main">Aller au contenu</a>
  <div data-nav></div>

  <header class="wrap" style="padding-top: 18px;">
    <p class="eyebrow">MERCH</p>
    <h1 class="page-title">Shop</h1>
    <p class="page-lead">Merch officiel Koverbalprod.</p>
  </header>

  <main id="main" class="wrap">
    <section class="card">
      <div class="card-head">
        <h2>Shop</h2>
        <span class="card-kicker">Intégré</span>
      </div>

      <div class="hero-cta" style="padding:0; margin-bottom: 14px;">
        <a class="btn primary" target="_blank" rel="noopener noreferrer" href="https://koverbalprod.myspreadshop.fr">Ouvrir le shop</a>
        <a class="btn ghost" href="/contact/">Contact</a>
      </div>

      <div class="shop-shell">
        <div id="myShop">
          <a href="https://koverbalprod.myspreadshop.fr">koverbalprod</a>
        </div>
      </div>

      <script>
        var spread_shop_config = {
          shopName: 'koverbalprod',
          locale: 'fr_FR',
          prefix: 'https://koverbalprod.myspreadshop.fr',
          baseId: 'myShop'
        };
      </script>

      <script
        type="text/javascript"
        src="https://koverbalprod.myspreadshop.fr/shopfiles/shopclient/shopclient.nocache.js">
      </script>

      <!-- ✅ JS LOCAL: scroll automatique vers les produits (évite que les gens voient le marketing direct) -->
      <script>
        (function () {
          const root = document.getElementById('myShop');
          if (!root) return;

          // Sélecteurs probables d’une zone produits (varie selon templates)
          const PRODUCT_SELECTORS = [
            '.sprd-products',
            '.sprd-product-list',
            '.sprd-design-list',
            '[class*="ProductList"]',
            '[class*="productList"]',
            '[class*="Products"]',
            '[class*="products"]'
          ];

          function findTarget() {
            for (const sel of PRODUCT_SELECTORS) {
              const el = root.querySelector(sel);
              if (el && el.offsetHeight > 80) return el;
            }
            return null;
          }

          function shouldAvoidScrolling() {
            // Si on est sur panier/checkout/détail produit, on ne force pas le scroll
            const blockers = [
              '.sprd-basket', '.sprd-checkout', '.sprd-productDetail',
              '[class*="Basket"]', '[class*="Checkout"]', '[class*="ProductDetail"]'
            ];
            return blockers.some(sel => root.querySelector(sel));
          }

          function scrollOnce() {
            if (root.dataset.kbScrolled === '1') return true;
            if (shouldAvoidScrolling()) return true;

            const target = findTarget();
            if (!target) return false;

            root.dataset.kbScrolled = '1';
            setTimeout(() => {
              target.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }, 80);
            return true;
          }

          // Essais pendant chargement async
          let tries = 0;
          const timer = setInterval(() => {
            tries++;
            if (scrollOnce() || tries > 30) clearInterval(timer);
          }, 250);

          // Observe les re-render Spreadshop
          const obs = new MutationObserver(() => scrollOnce());
          obs.observe(root, { childList: true, subtree: true });

          // Si Spreadshop navigue en interne, on autorise un re-scroll (mais pas en checkout)
          window.addEventListener('hashchange', () => {
            root.dataset.kbScrolled = '0';
            setTimeout(scrollOnce, 120);
          });
        })();
      </script>

    </section>

    <footer class="footer">
      <div class="footer-inner">
        <div class="footer-left">
          <img class="footer-logo" src="/koverbalprod-logo.jpg" alt="Koverbalprod" />
          <div>
            <p class="footer-title">Koverbalprod</p>
            <p class="footer-sub">Label / Production / Rap — « Le crew qui percute le crom »</p>
          </div>
        </div>
        <div class="footer-links">
          <a href="/ecouter/">Écouter</a>
          <a href="/playlists/">Playlists</a>
          <a href="/artistes/">Artistes</a>
          <a href="/contact/">Contact</a>
        </div>
      </div>
    </footer>
  </main>

  <script src="/nav.js" defer></script>
  <script>
    window.addEventListener('load', () => document.body.classList.remove('preload'));
  </script>
</body>
</html>
